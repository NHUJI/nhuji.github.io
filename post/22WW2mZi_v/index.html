<!DOCTYPE html>
<html>
  <head>
    <!-- ä»£ç é«˜äº® -->
    <link rel="stylesheet" type="text/css" href="https://nhuji.github.io/highlight/styles/github-dark.css">
    <script src="https://nhuji.github.io/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <meta charset="utf-8" >
<meta name="msvalidate.01" content="A81BF2369C00030213C4032E982E497F" />

<title>Flutter: æ–¹ä¾¿å‘ç°é‡ç”¨æ˜¯å¦æˆåŠŸçš„å°å·¥å…·â€”â€” Highlight Repaints | Huhu&#39;s blog</title>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DW92LC8QYB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DW92LC8QYB');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<script src="https://kit.fontawesome.com/e8bf4d3f65.js" crossorigin="anonymous"></script>
<link rel="shortcut icon" href="https://nhuji.github.io/favicon.ico?v=1753943723267">
<link rel="stylesheet" href="https://nhuji.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="æœ€è¿‘åœ¨åšä¸€ä¸ªé•¿åˆ—è¡¨çš„åŠŸèƒ½æ—¶, å‘ç°å³ä½¿ä½¿ç”¨äº†SliverListÂ , ä½†åœ¨è€æœºå‹ä¹Ÿè¿˜æ˜¯å¾ˆå¡,
å¹¶ä¸”ç«å“ä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜, è€Œä¸”åˆ—è¡¨ä¼šéšç€ item æ•°é‡å¢åŠ è¶Šæ¥è¶Šå¡,
ä¼¼ä¹é‡ç”¨æ ¹æœ¬æ²¡æœ‰ç”Ÿæ•ˆ ğŸ˜­
è¿™ç§é—®é¢˜å¾ˆæ˜¾ç„¶åœ¨é«˜æ€§èƒ½çš„æœºå™¨æˆ–è€…æ¨¡æ‹Ÿå™¨æ—¶éš¾ä»¥..." />
    <meta name="keywords" content="Flutter" />
    
<!-- doodleå½©è›‹æŒ‰é’® -->
    <style>
      button,
      button::after {
       padding: 16px 20px;
       font-size: 18px;
       background: linear-gradient(45deg, transparent 5%, #ff013c 5%);
       border: 0;
       color: #fff;
       letter-spacing: 3px;
       line-height: 1;
       box-shadow: 6px 0px 0px #00e6f6;
       outline: transparent;
       position: relative;
       /*display: flex;
       justify-content: center;
       align-items: center;*/
      }

      button::after {
       --slice-0: inset(50% 50% 50% 50%);
       --slice-1: inset(80% -6px 0 0);
       --slice-2: inset(50% -6px 30% 0);
       --slice-3: inset(10% -6px 85% 0);
       --slice-4: inset(40% -6px 43% 0);
       --slice-5: inset(80% -6px 5% 0);
       content: "HOVER ME";
       display: block;
       position: absolute;
       top: 0;
       left: 0;
       right: 0;
       bottom: 0;
       background: linear-gradient(45deg, transparent 3%, #00e6f6 3%, #00e6f6 5%, #ff013c 5%);
       text-shadow: -3px -3px 0px #f8f005, 3px 3px 0px #00e6f6;
       clip-path: var(--slice-0);
      }

      button:hover::after {
       animation: 1s glitch;
       animation-timing-function: steps(2, end);
      }

      @keyframes glitch {
       0% {
        clip-path: var(--slice-1);
        transform: translate(-20px, -10px);
       }

       10% {
        clip-path: var(--slice-3);
        transform: translate(10px, 10px);
       }

       20% {
        clip-path: var(--slice-1);
        transform: translate(-10px, 10px);
       }

       30% {
        clip-path: var(--slice-3);
        transform: translate(0px, 5px);
       }

       40% {
        clip-path: var(--slice-2);
        transform: translate(-5px, 0px);
       }

       50% {
        clip-path: var(--slice-3);
        transform: translate(5px, 0px);
       }

       60% {
        clip-path: var(--slice-4);
        transform: translate(5px, 10px);
       }

       70% {
        clip-path: var(--slice-2);
        transform: translate(-10px, 10px);
       }

       80% {
        clip-path: var(--slice-5);
        transform: translate(20px, -10px);
       }

       90% {
        clip-path: var(--slice-1);
        transform: translate(-10px, 0px);
       }

       100% {
        clip-path: var(--slice-1);
        transform: translate(0);
       }
      }

    </style>


  </head>

  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://nhuji.github.io">
      <!-- å¤´åƒ 
        <img src="https://nhuji.github.io/images/avatar.png?v=1753943723267" class="site-logo">
      -->
        <div class="site-logo">
          <img src="https://nhuji.github.io/images/avatar2.png?v=1753943723267" class="site-logo-image-back">
          <img src="https://nhuji.github.io/images/avatar.png?v=1753943723267" class="site-logo-image">
        </div>
        <h1 class="site-title">Huhu&#39;s blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            ç›®å½•
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/NHUJI" target="_blank">
            <i class="fa-brands fa-github"></i>
          </a>
        
      
        
      
        
      

      <a class="social-link" href="mailto:hujinfinite@gmail.com" target="_blank">
      <i class="fa-regular fa-envelope"></i>
      </a>

    </div>
    <div class="site-description">
      It's me, huhu
    </div>
    <div class="site-footer">
      <a href="https://github.com/NHUJI" target="_blank">Â© 2021~2025 Nhuji</a> | <a class="rss" href="https://nhuji.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Flutter: æ–¹ä¾¿å‘ç°é‡ç”¨æ˜¯å¦æˆåŠŸçš„å°å·¥å…·â€”â€” Highlight Repaints</h2>
            <div class="post-date">2023-12-16</div>
            
            <div class="post-content" v-pre>
              <p>æœ€è¿‘åœ¨åšä¸€ä¸ªé•¿åˆ—è¡¨çš„åŠŸèƒ½æ—¶, å‘ç°å³ä½¿ä½¿ç”¨äº†SliverListÂ , ä½†åœ¨è€æœºå‹ä¹Ÿè¿˜æ˜¯å¾ˆå¡,<br>
å¹¶ä¸”ç«å“ä¸å­˜åœ¨è¿™æ ·çš„é—®é¢˜, è€Œä¸”åˆ—è¡¨ä¼šéšç€ item æ•°é‡å¢åŠ è¶Šæ¥è¶Šå¡,<br>
ä¼¼ä¹é‡ç”¨æ ¹æœ¬æ²¡æœ‰ç”Ÿæ•ˆ ğŸ˜­</p>
<p>è¿™ç§é—®é¢˜å¾ˆæ˜¾ç„¶åœ¨é«˜æ€§èƒ½çš„æœºå™¨æˆ–è€…æ¨¡æ‹Ÿå™¨æ—¶éš¾ä»¥æ˜æ˜¾çš„å‘ç°æˆ–è€…è°ƒè¯•</p>
<p>æœ€ç»ˆçŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„è§£å†³èµ·æ¥å°±å¾ˆç®€å•äº†,<br>
ä¹Ÿå°±æ˜¯ <strong>CustomScrollView</strong> ä¸‹çš„åˆ—è¡¨è¦ç›´æ¥ä½œä¸ºå®ƒçš„ slivers ,<br>
è€Œä¸æ˜¯å†åŒ…åˆ°å…¶ä»–ç»„ä»¶ä¸‹åœ¨æ”¾åœ¨å®ƒçš„é‡Œé¢</p>
<p>ä½†åœ¨ç»“æ„æ¯”è¾ƒå¤æ‚çš„å¤šäººå‚ä¸çš„é¡¹ç›®, å’Œ flutter ç»„ä»¶ä¸€å±‚ä¸€å±‚åŒ…å­ç»„ä»¶çš„æƒ³æ³•ä¸‹,<br>
å¯»æ‰¾åŸå› æ—¶å´<strong>å®¹æ˜“å¿½ç•¥æˆ–éš¾ä»¥å‘ç°</strong>è¿™ä¸ªé—®é¢˜,<br>
è¿™å°±éœ€è¦æœ‰ä¸€ä¸ªç¡®å®šå…ƒç´ æœ‰æ²¡æœ‰æˆåŠŸé‡ç”¨çš„æ–¹æ³•</p>
<p>é‚£ä¹ˆé™¤äº†æ‰¾æ€§èƒ½å¼±çš„è€æœºå‹å’Œç«å“æ¥æµ‹è¯•, åœ¨ç»„ä»¶æ ‘ä¸­ä¸Šä¸‹ç¿»æ»šæŸ¥çœ‹å’Œç”¨æ€§èƒ½åˆ†æå·¥å…·å¯¹æ¯”ä¿®æ”¹å‰åçš„å˜åŒ–å¤–,<br>
æœ‰æ²¡æœ‰ç®€å•ç›´è§‚çš„å·¥å…·, èƒ½å¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„ç¡®å®šæ˜¯å¦é‡ç”¨æˆåŠŸå‘¢ (å¥½å§,æ ‡é¢˜å·²ç»å‰§é€äº†)</p>
<p>Flutter DevTools çš„ **Highlight Repaints **å·¥å…·å°±èƒ½å¸®åŠ©æˆ‘ä»¬åšåˆ°è¿™ä¸€ç‚¹<br>
<img src="https://nhuji.github.io/post-images/1753843530307.png" alt="" loading="lazy"></p>
<p>æ‰“å¼€å®ƒåä¼šåœ¨æˆ‘ä»¬çš„ UI ä¸Šç»™å„ç§å…ƒç´ æ·»åŠ <strong>å¸¦æœ‰é¢œè‰²çš„æ¡†,</strong><br>
å½“å…ƒç´ é‡ç»˜æ—¶, æ¡†çš„é¢œè‰²å°±ä¼šæŒ‰ç…§æ—¶é—´è¿›è¡Œ<strong>å½©è™¹è‰²</strong>çš„å˜åŒ–<br>
<img src="https://nhuji.github.io/post-images/1753843559631.gif" alt="" loading="lazy"></p>
<p>è™½ç„¶å®ƒä¸»è¦ç”¨äºæ£€æŸ¥æœ‰æ²¡æœ‰å…ƒç´ è¢«å¤šæ¬¡é‡ç»˜, ä¸è¿‡åœ¨æ£€æµ‹åˆ—è¡¨é‡ç”¨æ˜¯å¦æˆåŠŸæ—¶ä¹Ÿéå¸¸æœ‰ç”¨</p>
<hr>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¸€ä¸ªå±•ç¤º Material Icons çš„åˆ—è¡¨æ¥ä½œä¸ºæ¼”ç¤º</p>
<p>åœ¨æˆ‘ä»¬çš„åˆ—è¡¨æ²¡æœ‰æˆåŠŸé‡ç”¨,æ—¶ç”±äºæ•´ä¸ªåˆ—è¡¨çš„å…ƒç´ ä¸€å¼€å§‹éƒ½æ¸²æŸ“å¥½äº†,æ¯ä¸ª item éƒ½åœ¨ Widget Tree ä¸Š,<br>
åœ¨æˆ‘ä»¬æ»‘åŠ¨åˆ—è¡¨æ—¶,å…ƒç´ çš„æ–¹æ¡†é¢œè‰²ä¸ä¼šæœ‰å˜åŒ–,åªæœ‰æ•´ä¸ªåˆ—è¡¨çš„å¤–å±‚åœ¨å˜æ¢é¢œè‰², å¾ˆæ˜¾ç„¶é‡ç”¨æ²¡æœ‰æˆåŠŸ</p>
<figure data-type="image" tabindex="1"><img src="https://nhuji.github.io/post-images/1753843616953.gif" alt="" loading="lazy"></figure>
<p>åœ¨åˆ—è¡¨æˆåŠŸé‡ç”¨çš„æƒ…å†µä¸‹, ç”±äºå‰åçš„ item åœ¨æ»šåŠ¨åˆ°å®ƒçš„æ—¶å€™æ‰è¢«é‡ç”¨ä¹Ÿå°±æ˜¯è§†å›¾è¿›è¡Œäº†æ›´æ–°, é‚£ä¹ˆæˆ‘ä»¬æ»‘åŠ¨æ—¶å°±èƒ½çœ‹åˆ°æ–¹æ¡†é¢œè‰²ä¸ä¸€æ ·çš„ item, åœ¨å¿«é€Ÿæ»‘åŠ¨æ—¶è¿˜ä¼šå‘ˆç°å‡ºå½©è™¹çš„æ•ˆæœ</p>
<figure data-type="image" tabindex="2"><img src="https://nhuji.github.io/post-images/1753843670218.gif" alt="" loading="lazy"></figure>
<p>è¿™æ ·ç›´è§‚çš„åé¦ˆå¾ˆé€‚åˆæˆ‘ä»¬åœ¨æ¨¡æ‹Ÿå™¨,<br>
æˆ–æ€§èƒ½è¾ƒé«˜å¯¼è‡´é‡ç”¨å¸¦æ¥çš„æ€§èƒ½æå‡æ•ˆæœä¸æ˜æ˜¾çš„çœŸæœºä¸Šè°ƒè¯•æ—¶, æ¥å‘ç°å’Œç¡®è®¤æ˜¯å¦æœ‰é—®é¢˜</p>
<hr>
<p>å½“ç„¶,æœ‰æ—¶å€™å¯èƒ½ DevTools è‡ªåŠ¨æ¡†é€‰çš„èŒƒå›´å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„,å¸Œæœ›æ›´è¿›ä¸€æ­¥ç»†åŒ–åˆ°æŒ‡å®šçš„å…ƒç´ </p>
<p>æ¯”å¦‚å‡è®¾æˆ‘ä»¬éœ€è¦è®©åˆ—è¡¨é‡Œçš„éƒ¨åˆ†å›¾æ ‡æ—‹è½¬å¹¶æŸ¥çœ‹å®ƒä»¬çš„æ›´æ–°æƒ…å†µ<br>
(è¿™ä¸ªä¾‹å­æœ‰ç‚¹æ€ª,ä¸è¿‡å¤§æ¦‚å°±æ˜¯æ›´ç²¾ç»†çš„çœ‹è§†å›¾æ›´æ–°çš„æ–¹å¼æ¼”ç¤ºå§)</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å›¾æ ‡ä»£ç å¤–åŠ å…¥ <strong>RepaintBoundary</strong> æ¥åšåˆ°å¯¹å…ƒç´ æ·»åŠ è¿™æ ·çš„æ–¹æ¡†è¿›è¡Œè°ƒè¯•</p>
<p>åœ¨æ²¡æœ‰æ·»åŠ å‰æˆ‘ä»¬å‘ç°å›¾æ ‡æ—‹è½¬æ—¶,<br>
æ•´ä¸ªåˆ—è¡¨çš„æ–¹æ¡†é¢œè‰²éƒ½åœ¨å˜åŒ–,ä¸æ–¹ä¾¿æˆ‘ä»¬å¯¹å›¾æ ‡å˜åŒ–å’Œæ›´æ–°çš„ç¡®è®¤</p>
<figure data-type="image" tabindex="3"><img src="https://nhuji.github.io/post-images/1753843704526.gif" alt="" loading="lazy"></figure>
<p>æ‰€ä»¥æ¥ä¸‹æ¥è®©æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¿®æ”¹</p>
<p>åœ¨å¯¼å…¥ç›¸å…³çš„åŒ…å¹¶å¯ç”¨</p>
<pre><code>import 'package:flutter/material.dart';
import 'package:flutter/rendering.dart'; // å¯¼å…¥åŒ…

void main() {
  debugRepaintRainbowEnabled = true; // å¯ç”¨é‡ç»˜é«˜äº®
  runApp(MyApp());
}
</code></pre>
<p>ç„¶ååœ¨éœ€è¦çš„å…ƒç´ ä¸Šæ·»åŠ RepaintBoundaryå</p>
<pre><code>@override
Widget build(BuildContext context) {
  return RepaintBoundary(
    child: RotationTransition(
      turns: Tween(begin: 0.0, end: 1.0).animate(_controller),
      child: Icon(widget.iconData,
          color: Theme.of(context).colorScheme.primary, size: 24),
    ),
  );
}
</code></pre>
<p>åªæœ‰æ—‹è½¬çš„å›¾æ ‡æœ¬èº«çš„æ¡†ä¼šå˜æ¢é¢œè‰²</p>
<p>è¿™æ ·ç»†åŒ–çš„æ›´æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè°ƒè¯•<br>
<img src="https://nhuji.github.io/post-images/1753844010480.gif" alt="" loading="lazy"></p>
<p>------------------------------ ç»“å°¾Â  ------------------------</p>
<p>Flutter DevTools é‡Œè¿˜æœ‰å¾ˆå¤šç±»ä¼¼è¿™æ ·çš„å·¥å…·ä¹Ÿè®¸èƒ½æœ‰æ—¶å€™å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè°ƒè¯•:</p>
<p>Select Widget Mode: åœ¨ç‚¹å‡»ç»„ä»¶åç›´æ¥è·³è½¬åˆ°å¯¹åº” Widget Tree ä½ç½®å’Œä»£ç </p>
<p>Slow Animations: ä»¥äº”åˆ†ä¹‹ä¸€çš„é€Ÿåº¦è¿è¡ŒåŠ¨ç”», ä»¥ä¾¿å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–</p>
<p>Show Guidelines: è¦†ç›–ä¸€å±‚å¼•å¯¼çº¿ä»¥å¸®åŠ©è°ƒæ•´å¸ƒå±€é—®é¢˜</p>
<p>Show Baselines: é’ˆå¯¹æ–‡å­—å¯¹é½å±•ç¤ºæ–‡å­—çš„åŸºçº¿, å¯¹æ£€æŸ¥æ–‡å­—æ˜¯å¦å¯¹é½æœ‰å¸®åŠ©</p>
<p>Highlight Oversized Images: è¯¥é€‰é¡¹é€šè¿‡åè½¬é¢œè‰²å’Œå‚ç›´ç¿»è½¬æ¥çªå‡ºæ˜¾ç¤ºè¿‡å¤§çš„å›¾åƒ, é«˜äº®æ˜¾ç¤ºçš„å›¾åƒä½¿ç”¨çš„å†…å­˜è¶…è¿‡äº†æ‰€éœ€å†…å­˜ï¼Œä¾‹å¦‚ï¼Œä»¥ 100 x 100 åƒç´ æ˜¾ç¤ºçš„ 5MB å¤§å›¾åƒ</p>
<p>å‚è€ƒ:</p>
<p><a href="https://docs.flutter.dev/tools/devtools/inspector">Using the Flutter inspector</a></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://nhuji.github.io/tag/yKCmzzA3CV/" class="tag">
                    Flutter
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://nhuji.github.io/post/u3mWv20Qi/">
                  <h3 class="post-title">
                    SF Symbols çš„ç‰¹æ€§
                  </h3>
                </a>
              </div>
            
            <!-- åƒç´ å›¾ -->
            
            <div id="doodle">
              <css-doodle  click-to-update >
                 @grid: 16x12 / 800px auto;
                  @size: 6px;
                  box-shadow: @m3x5(
                    calc(18px - @nx(-1) * 6px) calc(@ny * 6px)
                      0 @p(@m3(#000), @m2(transparent)),
                    calc(18px + @nx(-1) * 6px) calc(@ny * 6px)
                      0 @lp
                  );
              </css-doodle>
           
              <button onclick="startAnimation()">ç‚¹å‡»è¿™é‡Œå˜å¾—ç‹‚é‡</button>
            </div>

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>






   
    <script src="https://unpkg.com/css-doodle@0.34.1/css-doodle.min.js"></script>
     <!-- ç”¨äºåˆ¤æ–­css doodleçš„æ˜¾ç¤º -->
    <script>
      var doodle = document.getElementById("doodle");
      var pageTitle = document.title;
      if (pageTitle === "å…³äº | Huhu's blog") {
        doodle.style.display = 'block';
      } else {
        doodle.style.display = 'none';
      }
    </script>



    <!-- doodleæ›´æ–° -->
    <script>
      const cssDoodle = document.querySelector('css-doodle');

      // å®šä¹‰æ—¶é—´é—´éš”å˜é‡ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½
      let interval = 2000;

      // è‡ªåŠ¨æ›´æ–°(æ’­æ”¾)CSS-Doodleæ ·å¼
      function animateDoodle() {
        cssDoodle.update();
        // åœ¨10æ¯«ç§’åå†æ¬¡è°ƒç”¨æ­¤å‡½æ•°
        setTimeout(animateDoodle, interval);
      }
      
      function startAnimation() {
        interval /= 1.5;
        cssDoodle.update(`
         @grid: 16x12 / 800px auto;
         @size: 6px;
         color: hsl(@r240, 30%, 50%);
         box-shadow: @m3x5(
          calc(18px - @nx(-1) * 6px) calc(@ny * 6px)
            0 @p(@m3(currentColor), @m2(transparent)),
          calc(18px + @nx(-1) * 6px) calc(@ny * 6px)
            0 @lp
          );  
      `);
        // å¼€å§‹å¿«é€Ÿæ›´æ–°åŠ¨ç”»
        animateDoodle();
      }


     
    </script>
  
  </body>
</html>
